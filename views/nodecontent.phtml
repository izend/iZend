<?php

/**
 *
 * @copyright  2010-2011 izend.org
 * @version    3
 * @link       http://www.izend.org
 */
?>
<?php
foreach ($contents as $c) {
	switch($c['type']) {
		case 'text':
			$s = $c['text'];
			echo $s, PHP_EOL;
			break;
		case 'file':
			$file_content = $c['file'];
			if ($file_content) {
				echo '<div class="file">', PHP_EOL, $file_content, PHP_EOL,'</div>', PHP_EOL;
			}
			break;
		case 'download':
			$file = htmlspecialchars($c['file'], ENT_COMPAT, 'UTF-8');
			$download_url = $c['download_url'];
			echo '<div class="download">', PHP_EOL, '<a href="', $download_url, '" rel="nofollow">', $file, '</a>', PHP_EOL, '</div>', PHP_EOL;
			break;
		case 'infile':
			include $c['infile'];
			break;
		case 'longtail':
			extract($c);	/* file image width height skin icons duration autostart repeat */
			$id = uniqid('id');
			echo '<div id="', $id, '" class="longtail"></div>', PHP_EOL;
			echo '<script type="text/javascript">', PHP_EOL;
			echo 'var so = new SWFObject("/longtail/player.swf","', $id, '","', $width, '","', $height, '","9","#FFFFFF");', PHP_EOL;
			echo 'so.addParam("allowfullscreen", "false");', PHP_EOL;
			echo 'so.addParam("wmode", "opaque");', PHP_EOL;
			echo 'so.addVariable("usefullscreen", "false")', PHP_EOL;
			if ($image) {
				echo 'so.addVariable("image", "', $image, '");', PHP_EOL;
			}
			if ($file) {
				echo 'so.addVariable("file", "', $file, '");', PHP_EOL;
			}
			if ($duration) {
				echo 'so.addVariable("duration", "', $duration, '");', PHP_EOL;
			}
			if ($skin) {
				echo 'so.addVariable("skin", "', $skin, '");', PHP_EOL;
			}
			echo 'so.addVariable("icons", "', $icons ? 'true' : 'false', '");', PHP_EOL;
			echo 'so.addVariable("controlbar", "bottom");', PHP_EOL;
			echo 'so.addVariable("repeat", "', $repeat ? 'always' : 'none', '");', PHP_EOL;
			echo 'so.addVariable("autostart", "', $autostart ? 'true' : 'false', '");', PHP_EOL;
			echo 'so.write("', $id, '");', PHP_EOL;
			echo '</script>', PHP_EOL;
			break;
		default:
			break;
	}
}
?>
